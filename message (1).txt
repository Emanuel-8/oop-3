#include <iostream>
#include <cstring>
using namespace std;

class IceCream {
    string name;
    char ingredients[100];
    double price;
    int discount;
public:
    IceCream() {
        int discount=0, price=0;
        this->discount=discount;
        this->price=price;
    }
    IceCream(string name, char ingredients[]={""}, double price=0, int discount=0) {
        this->name=name;
        this->price=price;
        this->discount=discount;
        strcpy(this->ingredients,ingredients);
    }
    ~IceCream(){}
    double discounted_price() const{
        double discounted_price=(this->price*(100-this->discount))/100;
        return discounted_price;
    }
    friend ostream& operator<<(ostream& out, const IceCream& i);
    IceCream& operator++() {
        this->discount+=5;
        return *this;
    }
    IceCream operator+(string s) {
        IceCream ice_cream(*this);
        for (int i=0;i<this->name.size();i++) {
            ice_cream.name[i]=this->name[i];
        }
        ice_cream.name[this->name.size()]='+';
        for (int i=0;i<s.size();i++) {
            ice_cream.name[this->name.size()+1+i]=s[i];
        }
        ice_cream.price=this->price+10;
        return ice_cream;
    }
    IceCream& operator=(string s) {
        this->name=s;
        return *this;
    }
    void setDiscount(int discount);
    void setName(string name);

};
void IceCream::setDiscount(int discount) {
    this->discount=discount;
}
void IceCream::setName(string name) {
    this->name=name;
}

ostream& operator<<(ostream& out, const IceCream& i) {
    if (i.discount!=0) out<<i.name<<": "<<i.ingredients<<" "<<i.price<<" ["<<i.discounted_price()<<"]";
    else out<<i.name<<": "<<i.ingredients<<" "<<i.price;
    return out;
}

class IceCreamShop {
    char shop[50];
    IceCream* arr;
    int amount;
    int size;
    int capacity;
public:
    IceCreamShop() {
        int capacity=4,size=0;
        this->size=size;
        this->capacity=capacity;
        this->arr=new IceCream[capacity];
    }
    IceCreamShop(char shop[], int size=0, int capacity=4) {
        strcpy(this->shop,shop);
        this->size=size;
        this->capacity=capacity;
        this->arr=new IceCream[capacity];
    }
    ~IceCreamShop(){}
    IceCreamShop& operator+=(IceCream ice_cream) {
        if (size==capacity) {
            capacity*=2;
            IceCream* niza=new IceCream[capacity];
            for (int i=0;i<size;i++) {
                niza[i]=this->arr[i];
            }
            delete [] arr;
            this->arr=niza;
        }
        this->arr[size]=ice_cream;
        size++;

        return *this;
    }
    friend ostream& operator<<(ostream& out, const IceCreamShop& shops);
};

ostream& operator<<(ostream& out, const IceCreamShop& shops) {
    for (int i=0;i<shops.size;i++) {
        out<<shops.arr[i]<<endl;
    }
    return out;
}
int main() {
    IceCream i1("Vanilla", "milk, sugar", 100.0);
    IceCream i2("Chocolate", "cocoa, sugar", 120.0, 10);
    IceCream i3("Strawberry", "strawberries, sugar", 110.0);
    // Зголемување на попуст со ++
    ++i3;
    // Пример на setDiscount и setName
    i1.setDiscount(15);
    i2.setName("Dark Chocolate");
    // Креирам продавница
    IceCreamShop shop("Sweet Shop");
    // Додавање сладоледи
    shop += i1;
    shop += i2;
    shop += i3;
    // Печатење
    cout << shop;
    return 0;
}